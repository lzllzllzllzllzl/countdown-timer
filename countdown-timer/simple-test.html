<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®€åŒ–ç‰ˆå€’è®¡æ—¶æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f0f0f0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
        }
        .preset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .preset-card {
            background: #007bff;
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }
        .preset-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,123,255,0.3);
        }
        .timer-card {
            background: #f8f9fa;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border: 2px solid #dee2e6;
        }
        .timer-display {
            font-size: 48px;
            font-weight: bold;
            text-align: center;
            color: #007bff;
            font-variant-numeric: tabular-nums;
        }
        .timer-name {
            font-size: 18px;
            margin-bottom: 10px;
            color: #495057;
        }
        .btn {
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            font-weight: bold;
        }
        .btn-primary {
            background: #007bff;
            color: white;
        }
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        .progress-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin-top: 15px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007bff, #00d4ff);
            transition: width 0.1s linear;
        }
        .log {
            background: #212529;
            color: #00ff00;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª å€’è®¡æ—¶åŠŸèƒ½æµ‹è¯•</h1>
        
        <h2>é¢„è®¾åœºæ™¯</h2>
        <div class="preset-grid" id="presetGrid">
            <div class="preset-card" data-minutes="1">
                <div>1åˆ†é’Ÿ</div>
            </div>
            <div class="preset-card" data-minutes="2">
                <div>2åˆ†é’Ÿ</div>
            </div>
            <div class="preset-card" data-minutes="5">
                <div>5åˆ†é’Ÿ</div>
            </div>
        </div>

        <h2>æ´»åŠ¨å€’è®¡æ—¶</h2>
        <div id="timers"></div>

        <h2>è°ƒè¯•æ—¥å¿—</h2>
        <div class="log" id="log"></div>
    </div>

    <script>
        const timers = new Map();
        let timerId = 0;

        function log(message) {
            const logDiv = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `[${time}] ${message}<br>`;
            logDiv.scrollTop = logDiv.scrollHeight;
            console.log(message);
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function createTimer(minutes, name) {
            timerId++;
            const id = timerId;
            const totalSeconds = minutes * 60;

            log(`åˆ›å»ºå€’è®¡æ—¶ #${id}: ${name}, ${minutes}åˆ†é’Ÿ`);

            const timer = {
                id: id,
                name: name,
                totalSeconds: totalSeconds,
                remainingSeconds: totalSeconds,
                interval: null,
                isRunning: false
            };

            timers.set(id, timer);
            renderTimer(timer);
            startTimer(id);
        }

        function renderTimer(timer) {
            const container = document.getElementById('timers');
            const div = document.createElement('div');
            div.className = 'timer-card';
            div.id = `timer-${timer.id}`;
            
            div.innerHTML = `
                <div class="timer-name">${timer.name}</div>
                <div class="timer-display" id="display-${timer.id}">${formatTime(timer.remainingSeconds)}</div>
                <div>
                    <button class="btn btn-primary" id="start-${timer.id}">å¼€å§‹</button>
                    <button class="btn btn-warning" id="pause-${timer.id}" style="display:none">æš‚åœ</button>
                    <button class="btn btn-danger" id="reset-${timer.id}">é‡ç½®</button>
                    <button class="btn btn-danger" id="delete-${timer.id}">åˆ é™¤</button>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-${timer.id}" style="width: 100%"></div>
                </div>
            `;

            container.appendChild(div);

            document.getElementById(`start-${timer.id}`).addEventListener('click', () => startTimer(timer.id));
            document.getElementById(`pause-${timer.id}`).addEventListener('click', () => pauseTimer(timer.id));
            document.getElementById(`reset-${timer.id}`).addEventListener('click', () => resetTimer(timer.id));
            document.getElementById(`delete-${timer.id}`).addEventListener('click', () => deleteTimer(timer.id));

            log(`å€’è®¡æ—¶å™¨ #${timer.id} å·²æ¸²æŸ“`);
        }

        function startTimer(id) {
            const timer = timers.get(id);
            if (!timer || timer.isRunning) return;

            timer.isRunning = true;
            log(`å€’è®¡æ—¶ #${id} å¼€å§‹è¿è¡Œ`);

            document.getElementById(`start-${id}`).style.display = 'none';
            document.getElementById(`pause-${id}`).style.display = 'inline-block';

            timer.interval = setInterval(() => {
                timer.remainingSeconds--;
                updateDisplay(timer);

                if (timer.remainingSeconds <= 0) {
                    finishTimer(id);
                }
            }, 1000);
        }

        function pauseTimer(id) {
            const timer = timers.get(id);
            if (!timer || !timer.isRunning) return;

            timer.isRunning = false;
            clearInterval(timer.interval);
            log(`å€’è®¡æ—¶ #${id} å·²æš‚åœ`);

            document.getElementById(`start-${id}`).style.display = 'inline-block';
            document.getElementById(`pause-${id}`).style.display = 'none';
        }

        function resetTimer(id) {
            const timer = timers.get(id);
            if (!timer) return;

            pauseTimer(id);
            timer.remainingSeconds = timer.totalSeconds;
            updateDisplay(timer);
            log(`å€’è®¡æ—¶ #${id} å·²é‡ç½®`);
        }

        function deleteTimer(id) {
            const timer = timers.get(id);
            if (!timer) return;

            if (timer.isRunning) {
                clearInterval(timer.interval);
            }

            timers.delete(id);
            document.getElementById(`timer-${id}`).remove();
            log(`å€’è®¡æ—¶ #${id} å·²åˆ é™¤`);
        }

        function finishTimer(id) {
            const timer = timers.get(id);
            if (!timer) return;

            timer.isRunning = false;
            clearInterval(timer.interval);
            
            log(`ğŸ‰ å€’è®¡æ—¶ #${id} ç»“æŸï¼`);
            alert(`å€’è®¡æ—¶ "${timer.name}" ç»“æŸäº†ï¼`);

            document.getElementById(`start-${id}`).style.display = 'inline-block';
            document.getElementById(`pause-${id}`).style.display = 'none';
        }

        function updateDisplay(timer) {
            const display = document.getElementById(`display-${timer.id}`);
            const progress = document.getElementById(`progress-${timer.id}`);
            
            display.textContent = formatTime(timer.remainingSeconds);
            const percent = (timer.remainingSeconds / timer.totalSeconds) * 100;
            progress.style.width = `${percent}%`;
        }

        // åˆå§‹åŒ–é¢„è®¾å¡ç‰‡ç‚¹å‡»äº‹ä»¶
        document.getElementById('presetGrid').addEventListener('click', (e) => {
            const card = e.target.closest('.preset-card');
            if (card) {
                const minutes = parseInt(card.dataset.minutes);
                createTimer(minutes, `${minutes}åˆ†é’Ÿå€’è®¡æ—¶`);
            }
        });

        log('é¡µé¢åŠ è½½å®Œæˆ');
        log('ç‚¹å‡»ä¸Šæ–¹é¢„è®¾å¡ç‰‡å¼€å§‹æµ‹è¯•');
    </script>
</body>
</html>